<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet Test</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
    integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
    crossorigin=""/>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.1.min.js"> </script>

    <script type="text/javascript" src="https://golden-layout.com/files/latest/js/goldenlayout.min.js"></script>
    <link type="text/css" rel="stylesheet" href="https://golden-layout.com/files/latest/css/goldenlayout-base.css" />
    <link type="text/css" rel="stylesheet" href="https://golden-layout.com/files/latest/css/goldenlayout-dark-theme.css" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
    integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
    integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
    crossorigin=""></script>

    <script src="js/script.js"></script> 
</head>
<body onload="initMap();">   
    <script>  

        var config = {
            content: [{
                type: 'row',
                content:[{
                    type: 'component',
                    componentName: 'mapComponent'
                },{
                    type: 'column',
                    content:[{
                        type: 'component',
                        componentName: 'testComponent',
                        componentState: { label: 'B' }
                    },{
                        type: 'component',
                        componentName: 'testComponent',
                        componentState: { label: 'C' }
                    }]
                }]
            }]
        };
        var map;
        var myLayout = new GoldenLayout( config );

        myLayout.registerComponent( 'testComponent', function( container, componentState ){
            container.getElement().html( '<h2>' + componentState.label + '</h2>' );
        });

        myLayout.registerComponent( 'mapComponent', function( container, componentState ){
            container.getElement().html( '<div id="map"></div>'  );
        });

        myLayout.on('componentCreated',function(component) {
            if(component.componentName === "mapComponent")
            {
                component.container.on('resize',function() {
                    map.invalidateSize();
                });
            }            
        });        

        function initMap()
        {
            myLayout.init();

            map = L.map('map').setView([51.505, -0.09], 13);

            var tiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            }).addTo(map);

            map.on('click', onMapClick);
        }

        function onMapClick(e) {
            L.popup().setLatLng(e.latlng)
                .setContent('You clicked the map at ' + e.latlng.toString())
                .openOn(map);
        }
        

        
        

    </script>
</body>
</html>